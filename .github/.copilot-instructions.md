# Monorepo Instructions

**Important**: Always run commands from the project root (`c:\Projects\tracing`) unless specifically instructed otherwise. This is a monorepo managed with pnpm workspaces.
**Important**: Do not run node commands or ad hoc js scripts. It is explicitly forbidden!

## Project Structure

This is a TypeScript monorepo workspace using pnpm workspaces. The project contains:

- `packages/tracing/`: Core tracing library for React component render tracking
- `apps/`: Example applications demonstrating the tracing library usage
- Each app has its own E2E tests using Playwright

## Testing Guidelines

- **IMPORTANT**: When running Playwright E2E tests, do NOT use the `--headed` flag
- Always run tests in headless mode for better performance and CI compatibility
- Use `pnpm --filter <app-name> test:e2e` without additional flags
- Run a single test at a time, since we are capturing logs for analysis
- Do not GREP since we are capturing logs from the test runs

## Development Practices

- The main tracing library provides `useAutoTrace` hooks for component render tracking
- AutoTracer should be initialized in `main.tsx` before React rendering
- When working with tests, prefer using the `runTests` tool or terminal commands
- Follow the monorepo structure when making changes across packages

## Code Patterns

- Use Domain-Driven Design (DDD) architecture in example apps
- Material-UI components are used for UI consistency
- Redux Toolkit is used for state management in examples
- All TypeScript code should follow strict typing practices
- One top level function, interface or type per file for clarity
- Named exports only, no default exports

## Verification

- Build the whole project using `pnpm build` from the root
- Run a single E2E test from the command line to verify logs are captured correctly
